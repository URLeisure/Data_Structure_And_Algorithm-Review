
<font color=#999AAA >以下是本篇文章正文内容，下面案例可供参考。</fond>
<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

## 树的存储结构	

树形结构是一对多的关系，除了树根之外，每一个节点有唯一的直接前驱（双亲），除了叶子之外，每一个节点又一个或多个直接后继（孩子）。

采用顺序存储和链式存储两种形式存储。

分别用两种方式存储下图树。

![在这里插入图片描述](https://img-blog.csdnimg.cn/7fa9cf6034cf426c881105e738be1acf.png)

### 顺序存储

顺序存储采用一段连续的存储空间，因为树中节点的数据关系是一对多的逻辑关系，不仅要存储数据元素，还要存储他们之间的逻辑关系。

顺序存储分为： <font color=#CC3300>**双亲表示法、孩子表示法和双亲孩子表示法**</font>。

#### 1.双亲表示法

除了存储数据元素之外，还存储其双亲节点的存储位置下标，其中 “-1” 表示不存在。每一个节点有两个域，即数据域 date 和双亲域 parent。

如图。

![双亲表示法](https://img-blog.csdnimg.cn/0b333a6b45a34b81a13040f263af8591.png)

#### 2.孩子表示法

除了存储数据元素之外，还存储其所有孩子的存储位置下标。

如图。

![孩子表示法](https://img-blog.csdnimg.cn/4ca190da09b24ca6baa2a5617960c9ab.png)

#### 3.双亲孩子表示法

双亲孩子表示法是指除了存储数据元素之外，还存储其双亲和所有孩子的存储位置下标。

如图。

![双亲孩子表示法](https://img-blog.csdnimg.cn/1c7c015d523244979a9f86935f9f13a8.png)

此方法其实就是在孩子表示法的基础上增加了一个双亲域。

是双亲表示法和孩子表示法的结合体。

#### 三种表示法的优缺点

1. <font color=#CC3300>**双亲表示法：**</font>只记录了每个节点的双亲，无法直接得到该节点的孩子。
2. <font color=#CC3300>**孩子表示法：**</font>可以得到该节点的孩子，但是无法直接得到该节点的双亲，而且由于不知道每个节点到底有多少个孩子，因此只能按照树的度（树中节点的最大度）分配孩子空间，这样做可能会浪费很多空间。
3. <font color=#CC3300>**双亲孩子表示法：**</font>在孩子表示法的基础上，增加了一个双亲域，可以快速得到节点的双亲和孩子，其缺点和孩子表示法一样，可能浪费很多空间。

### 链式存储

由于树中每个节点的孩子数量无法确定，因此在使用链式存储时，孩子指针域不确定分配多少个合适。

如果采用“异构型”数据结构，每个节点的指针域个数按照节点的孩子数分配，则数据结构描述困难；

如果采用每个节点都分配固定个数（如树的度）的指针域，则浪费很多空间。

可以考虑两种方法存储：

1. <font color=#CC3300>**采用邻接表的思路，将节点的所有孩子存储在一个单链表中，称为孩子链表表示法**</font>。
2. <font color=#CC3300>**采用二叉链表的思路，左指针存储第一个孩子，右指针存储右兄弟，称为孩子兄弟表示法**</font>。

#### 1.孩子链表表示法

孩子链表表示法类似于邻接表，表头含数据元素并指向第一个孩子指针，将所有孩子放入一个单链表中。

在表头中，data 存储数据元素，first 为指向第 1 个孩子的指针。单链表中的节点记录该节点的下标和下一个节点的地址。

如图。

![孩子链表表示法](https://img-blog.csdnimg.cn/e22853f0e8d646988d37ddee9abd29e7.png)

<font color=#CC3300>**孩子链表表示法中，如果在表头中再增加一个双亲域 parent，则为双亲孩子链表表示法**</font>。


#### 2.孩子兄弟表示法

节点除了存储数据元素之外，还有两个指针域 lchild 和 rchild ，被称为二叉链表。

lchild 存储“长子”地址，rchild 存储右兄弟地址。

![链](https://img-blog.csdnimg.cn/702c8ad1f5494ab5bd2df154c529486c.png)

<font color=#CC3300>**孩子兄弟表示法秘诀：<**/font>长子在左，兄弟向右。

存储方式如图。

![二叉链表](https://img-blog.csdnimg.cn/6cdc3c6570834870ada7852d21f66cce.png)


## 树、森林与二叉树的转换

根据树的孩子兄弟表示法，任何一颗树都可以根据秘诀转换成二叉链表来存储。

二叉链表存储法中，每个节点都有两个指针域，也成为二叉树表示法。这样，任何树和森林都可以转换为二叉树，其存储方式简单多了。

这样就完美地解决了树中孩子数量无法确定，难以分配空间的问题。

<font color=#CC3300>**树转换为二叉树的秘诀：长子当作左孩子，兄弟关系向右斜。**</font>

### 树和二叉树的转换

![树变二叉树](https://img-blog.csdnimg.cn/a89a0c63437844149826db4ce25cb8d2.png)

还原时，找准右兄弟。

![还原](https://img-blog.csdnimg.cn/339ca5a324174000ba6d1067db896c1a.png)


### 森林和二叉树的转换

森林时由 m（0）棵不相交的树组成的集合。

可以把森林中的每棵树的树根看作兄弟关系。

![森林 -> 树](https://img-blog.csdnimg.cn/83bc0053861048cebc735060749df6dc.png)

还原时，把第一个节点的兄弟砍掉。

![还原](https://img-blog.csdnimg.cn/700f1c5713dc4f2aba346ee0f86b9c83.png)


<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

## 总结

由于普通的树每个节点的子树个数不同，存储和运算都比较困难，因此在实际应用中，可以将树或森林转换为二叉树，然后进行存储和运算。

二者存在唯一的对应关系，因此不影响其结果。

<font color=#999AAA >下期预告：</font>二叉树的性质
